<article class="wrapper">
  <section class="header">
    <p class="header__name">Symbol</p>
    <p>Price</p>
    <p>Buy</p>
    <p>Liquidation</p>
    <p class="header__amount">Amount</p>
    <p class="header__pnl">PNL</p>
    <button class="header__button-close" (click)="orderService.closeAllCurrentsOrders(allCurrentToken)">Close all</button>
  </section>
  <section class="main" *ngIf="isLoader; else loader">
    <div *ngFor="let currentToken of allCurrentToken;">
      <app-order-row
        [symbol]="currentToken.symbol"
        [markPrice]="currentToken.markPrice"
        [entryPrice]="currentToken.entryPrice"
        [liquidationPrice]="currentToken.liquidationPrice"
        [amount]="currentToken.positionAmt"
        [pnlToken]="currentToken.unRealizedProfit">
      </app-order-row>
    </div>
  </section>

  <ng-template #loader>
    <div class="loader"><div></div></div>
  </ng-template>

  <form class="example-form" [formGroup]="newOrderFormGroup"
        (ngSubmit)="newOrder(symbolToken, 'BUY', quantityToken, priceToken, quantityOrders, distanceToken)">

    <mat-slide-toggle [color]="colorSlideToggle" checked="isToggleRepeatOrder"
                      (click)="toggleRepeatOrder()">Repeat orders</mat-slide-toggle>

    <mat-button-toggle-group>
      <mat-button-toggle checked (click)="isInputPriceLimit=false">MARKET</mat-button-toggle>
      <mat-button-toggle (click)="isInputPriceLimit=true">LIMIT</mat-button-toggle>
    </mat-button-toggle-group>

    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Symbol</mat-label>
      <input matInput maxlength="10"
             type="text" name="symbol"
             placeholder="BNBUSDT"
             [formControl]="symbolControl"
             [matAutocomplete]="auto"
              required>
      <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
        <mat-option *ngFor="let option of symbolAutocompleteFiltered | async" [value]="option">
          {{option}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field class="example-full-width" appearance="outline" *ngIf="isInputPriceLimit">
      <mat-label>Price</mat-label>
      <input matInput type="number" name="price" placeholder="270" formControlName="priceControl">
    </mat-form-field>

    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Distance Tokens</mat-label>
      <input matInput type="number" name="distance" placeholder="7.5" formControlName="distanceTokenControl" required>
    </mat-form-field>

    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Amount Tokens</mat-label>
      <input matInput type="number" name="amount" placeholder="0.5" formControlName="quantityTokenControl" required>
    </mat-form-field>

    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Amount Orders</mat-label>
      <input matInput type="number" name="amount_orders" placeholder="15" formControlName="quantityOrdersControl" required>
    </mat-form-field>

    <mat-form-field class="example-full-width" appearance="outline" *ngIf="isInputNumbersComma">
      <mat-label>Price.Numbers after the comma</mat-label>
      <input matInput type="number" placeholder="2" formControlName="priceCommaNumbersControl">
    </mat-form-field>

    <div class="form__button">
      <button mat-raised-button type="submit" color="accent" [disabled]="newOrderFormGroup.invalid || symbolControl.invalid">BUY</button>
    </div>
  </form>
</article>
